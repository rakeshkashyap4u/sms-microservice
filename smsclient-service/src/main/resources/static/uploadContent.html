<!DOCTYPE html>
<html>
	<head>
		<title>Upload Content</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" media="all" type="text/css" href="../promotion/css/main.css" />	
		<script type="text/javascript" src="../promotion/js/jquery-2.1.4.js"></script>
	</head>
	<body>
		<script type="text/javascript">
			$(document).ready(function() {
				getAlertService();
			});
			
			function getAlertService()			{
				$.ajax({
					type : 'GET',
					url : '../getAlertsWithContents',
					encode : true,
					success : function(response) 	{
					
						resp_obj = JSON.parse(response);
						alerts_array = resp_obj.alerts;						
						var html_string = '';
						
						for( i=0; i<alerts_array.length; i++ )		{
							var alert = alerts_array[i];
							var service = alert.serviceid +";"+ alert.subserviceid;
							html_string += '<tr> <td class="check"><input name="service" value="'+ service +'" type="checkbox" /></td><td class="serviceNote">'+ alert.serviceid +'</td><td class="serviceNote">'+ alert.subserviceid +'</td></tr>';
						}
						
						if( alerts_array.length > 0 )		{
							html_string += '<tr><td colspan=3 class="center"><input type="submit" value="DELETE" id="deleteContent" class="submitButton center"/></td></tr>';													
						}else	{
							html_string += '<tr><td colspan=3 class="center"><input type="submit" value="DELETE" id="deleteContent" class="center disable" disabled="true" /></td></tr>';
						}
						$('#services').append(html_string);
																
					},
					error : function(xhr, status) {
						console.log(status);
					}
				});
			}//End Of getAlertService Method
		</script>
		
		<div id="pageHeader">
			<div id="bng_logo">
				<!-- <img src="images/logo.jpg" width="80"> -->
				<p><font color="black">black</font>N<font color="green">green</font></p>
			</div>
			<div id="headingMain">
				<b>SMS</b>Client
			</div>
			<div class="clear"></div>
		</div>
		<div id="mainContent">
			<div id="stepsContainer">
				<span> Steps to Upload Content:- </span>
				<ul id="points">
					<li> Create the Content using the given <a href="./lib/contentSample.xlsx" class="downloadLink" ><abbr title="Click here to download sample file">Sample</abbr></a></li>
					<li> Change the Format of <em>sendingTime</em> Column to <abbr title="24 Hour Format(18:25:41)"><em>HH:MM:SS</em></abbr> and NOT in AM/PM format </li>
					<li> Save the file as <b><em>Unicode Text(*.txt)</em></b> </li>
					<li> Open the file in TextPad, Remove the first line of the file, containing the column names </li>
					<li> Now save this modified file with <b><em>UTF-8</em></b> Encoding; Option Available near Save Button </li>
						<!--
						<b>Example:-- </b>If you try to change content on 28th March and successfully upload April's Content.<br>
						Then Alerts for 28th March, 29th March, 30th March and 31st March will be replaced by Arpil Month Content <em>[Creating an issue]</em> <br>
						Therefore Recommended to Upload on either 31st or 1st of the Month.
						-->    
					<li> <b> Move AHEAD only if Month has ENDED and Delete OLD content before uploading NEW </b> </li>
					<li> 
						<p> CAREFULLY, select the services you want to delete... </p>
						<div id="showServices" >
							<form id="deleteForm" method="POST" action="/SMSClient/deleteAlertContent" >
								<table id="services" class="inner-table">
								</table>
							</form>
						</div>
					</li>
					<li> Now Upload the content file<i>(.txt file)</i> below </li>
				</ul>
			</div>
			<div id="container" style="min-height: 100px;">
				<span class="small">
					Upload the above derived file here:
				</span>
				<form id="uploadForm" method="POST" action="/SMSClient/uploadAlertContent/" enctype="multipart/form-data">
					<table class="inner-table">
						<tr>
							<td class="center">
								<input style="font-size: 12px;" id="contentupload" name="alertcontent[]" type="file" required/>
							</td>
						</tr>
						<tr>
							<td class="center">
								<input type="submit" value="Upload" name="UploadContent" class="submitButton center"/>
							</td>
						</tr>
					</table>
				</form>
			</div>
		</div>
	</body>
</html>